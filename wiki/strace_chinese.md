# [操作系统] C Shell (csh) strace 用法: 追踪系统调用和信号

## 概述
`strace` 是一个强大的工具，用于监视和调试程序的系统调用和信号。通过使用 `strace`，用户可以了解程序在运行时与操作系统的交互，帮助诊断问题和优化性能。

## 用法
基本语法如下：
```shell
strace [选项] [参数]
```

## 常用选项
- `-c`：统计系统调用的时间和次数。
- `-e`：过滤特定的系统调用。
- `-o <文件>`：将输出写入指定的文件，而不是标准输出。
- `-p <进程号>`：附加到一个正在运行的进程进行追踪。
- `-f`：追踪由当前进程生成的子进程。

## 常见示例
1. 追踪一个命令的系统调用：
   ```shell
   strace ls
   ```

2. 将输出保存到文件：
   ```shell
   strace -o output.txt ls
   ```

3. 统计系统调用的时间和次数：
   ```shell
   strace -c ls
   ```

4. 追踪特定的系统调用（例如 `open`）：
   ```shell
   strace -e trace=open ls
   ```

5. 附加到一个正在运行的进程（假设进程号为 1234）：
   ```shell
   strace -p 1234
   ```

## 提示
- 在使用 `strace` 时，注意输出信息可能会非常庞大，建议使用 `-o` 选项将输出重定向到文件中。
- 使用 `-e` 选项可以帮助你专注于特定的系统调用，从而减少干扰。
- 在调试复杂程序时，可以结合使用 `-f` 选项，以追踪所有子进程的调用。