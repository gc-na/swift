<!--
Meta Description: # Swift中的「self」關鍵字：用法與實務指南 ## 摘要 在Swift編程語言中，「self」關鍵字是一個特殊的參考，用於指向當前實例。它在類、結構、和枚舉中的使用非常普遍，幫助開發者清晰地引用當前對象的屬性或方法。 ## 文檔 ### 目的 「self」的主要用途是明確指向當前對象的實例，...
Meta Keywords: self, var, name, swift, class
-->

# Swift中的「self」關鍵字：用法與實務指南

## 摘要
在Swift編程語言中，「self」關鍵字是一個特殊的參考，用於指向當前實例。它在類、結構、和枚舉中的使用非常普遍，幫助開發者清晰地引用當前對象的屬性或方法。

## 文檔
### 目的
「self」的主要用途是明確指向當前對象的實例，特別是在需要區分屬性和方法名稱與其他變數時。這對於提高代碼的可讀性和避免命名衝突至關重要。

### 使用
在Swift中，「self」可以用於以下幾個情境：
- 在類或結構的初始化方法中，使用「self」來指定屬性。
- 在方法中使用「self」來調用其他方法或屬性。
- 在閉包中使用「self」來避免強引用循環。

### 詳細說明
- **初始化**：在初始化器中，使用「self」可以將傳入的參數賦值給實例屬性。
- **方法調用**：當方法的參數名稱與屬性名稱相同時，使用「self」可以明確指出要使用的屬性。
- **閉包中的使用**：在閉包內部，使用「self」是為了確保正確引用當前對象，特別是在逃逸閉包中。

## 範例
以下是使用「self」的幾個基本範例：

### 範例 1：初始化器
```swift
class Person {
    var name: String
    
    init(name: String) {
        self.name = name  // 使用self來區分屬性和參數
    }
}
```

### 範例 2：方法調用
```swift
class Car {
    var speed: Int = 0
    
    func accelerate(by amount: Int) {
        self.speed += amount  // 使用self來引用實例屬性
    }
}
```

### 範例 3：閉包中的引用
```swift
class Counter {
    var count = 0
    
    lazy var increment: () -> Void = { [weak self] in
        self?.count += 1  // 使用self來引用當前對象，避免強引用循環
    }
}
```

## 說明
在使用「self」時，有幾個常見的陷阱和注意事項：
- **命名衝突**：當方法的參數名稱與實例屬性相同時，必須使用「self」來避免混淆。
- **閉包的強引用循環**：在閉包中引用「self」時，需注意強引用循環的問題，特別是使用逃逸閉包時。
- **選擇性引用**：在閉包中引用「self」時，通常建議使用 `weak` 或 `unowned` 修飾符，以避免內存洩漏。

## 一句總結
在Swift中，「self」關鍵字用於明確指向當前對象的實例，提高代碼的可讀性和避免命名衝突。